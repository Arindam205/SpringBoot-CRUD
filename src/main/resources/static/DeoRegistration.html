<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidebar With Bootstrap</title>
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="styleAdminDashboard.css">
    <script>
        // Check if token is present in localStorage
        const token = localStorage.getItem('jwtToken');
        if (!token) {
            // Redirect to the sign-in page
            window.location.href = 'registration_password_checker.html';
        }
    </script>
</head>

<body>
<div class="wrapper">
    <aside id="sidebar" class="collapsed">
        <div class="d-flex">
            <button class="toggle-btn" type="button" onclick="toggleSidebar()">
                <i class="lni lni-grid-alt"></i>
            </button>
            <div class="sidebar-logo">
                <a href="#">ROR APPLICATION</a>
            </div>
        </div>
        <ul class="sidebar-nav">
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">
                    <i class="lni lni-user"></i>
                    <span>Profile</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">
                    <i class="lni lni-agenda"></i>
                    <span>Task</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link collapsed has-dropdown" data-bs-toggle="collapse"
                   data-bs-target="#auth" aria-expanded="false" aria-controls="auth">
                    <i class="lni lni-protection"></i>
                    <span>Data Entry Operator</span>
                </a>
                <ul id="auth" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link">Register Data Entry Operator</a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link">Manage Data Entry Operator</a>
                    </li>
                </ul>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link collapsed has-dropdown" data-bs-toggle="collapse"
                   data-bs-target="#multi" aria-expanded="false" aria-controls="multi">
                    <i class="lni lni-layout"></i>
                    <span>Multi Level</span>
                </a>
                <ul id="multi" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-toggle="collapse"
                           data-bs-target="#multi-two" aria-expanded="false" aria-controls="multi-two">
                            Two Links
                        </a>
                        <ul id="multi-two" class="sidebar-dropdown list-unstyled collapse">
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link">Link 1</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link">Link 2</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">
                    <i class="lni lni-popup"></i>
                    <span>Application Status</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">
                    <i class="lni lni-cog"></i>
                    <span>Video Tutorial</span>
                </a>
            </li>
        </ul>
        <div class="sidebar-footer">
            <a href="registration_password_checker.html" class="sidebar-link">
                <i class="lni lni-exit"></i>
                <span>Logout</span>
            </a>
        </div>
    </aside>

    <div class="main">
        <!-- Navbar -->
<!--        <nav class="navbar navbar-expand px-4 py-3">-->
<!--            <form action="#" class="d-none d-sm-inline-block"></form>-->
<!--            <div class="navbar-collapse collapse">-->
<!--                <ul class="navbar-nav ms-auto">-->
<!--                    <li class="nav-item dropdown">-->
<!--                        <a href="#" data-bs-toggle="dropdown" class="nav-icon pe-md-0">-->
<!--                            <img src="/account.png" class="avatar img-fluid" alt="">-->
<!--                        </a>-->
<!--                        <div class="dropdown-menu dropdown-menu-end rounded"></div>-->
<!--                    </li>-->
<!--                </ul>-->
<!--            </div>-->
<!--        </nav>-->

        <nav class="navbar navbar-expand-lg px-4 py-3">
            <!-- Logo and Text Section -->
            <div class="d-flex align-items-center">
                <!-- Logo -->
                <img src="LogoCorporation.png" alt="Logo" class="img-fluid" width="70" height="70">

                <!-- Text -->
                <div class="ms-3">
                    <h1 class="h3 font-weight-bold mb-0">AGARTALA MUNICIPAL CORPORATION</h1>
                    <h2 class="h5 font-weight-bold text-muted">e-Subidha</h2>
                </div>
            </div>

            <!-- Right side elements like search and profile dropdown -->
            <div class="collapse navbar-collapse justify-content-end">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown">
                        <a href="#" data-bs-toggle="dropdown" class="nav-icon pe-md-0">
                            <img src="/account.png" class="avatar img-fluid" alt="">
                        </a>
                        <div class="dropdown-menu dropdown-menu-end rounded">
                            <!-- Add dropdown items here if needed -->
                        </div>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="content px-3 py-4">
            <div class="container-fluid">
                <div class="mb-3">
                    <center><h3 class="fw-bold fs-4 mb-3">Create Data Entry Operator</h3></center>

                    <!-- Registration form -->
                    <div class="Registration container mt-5 mb-5 p-4 shadow-lg rounded bg-light">
                        <form id="deoRegistrationForm">
                            <!-- User Name Field -->
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="username" placeholder="Enter your name" required>
                                <label for="username">User Name</label>
                                <div class="invalid-feedback">This field is required.</div>
                            </div>

                            <!-- Email Field -->
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="email" placeholder="Enter email" required>
                                <label for="email">Email Address</label>
                                <div class="invalid-feedback">Please enter a valid email address.</div>
                            </div>

                            <!-- Phone Number Field -->
                            <div class="form-floating mb-3">
                                <input type="tel" class="form-control" id="phone" maxlength="10" pattern="[0-9]{10}" placeholder="Enter phone number" required pattern="\d{10}">
                                <label for="phone">Phone Number</label>
                            </div>

                            <!-- Ward Number Field -->
                            <div class="form-floating mb-3">
                                <input type="number" class="form-control" id="ward" id="wardNumber" min="1" max="99" placeholder="Enter ward number" required>
                                <label for="ward">Ward Number</label>

                            </div>

                            <!-- Password Field -->
                            <div class="form-floating mb-3">
                                <input type="password" class="form-control" id="password" placeholder="Password" required>
                                <label for="password">Password</label>
                            </div>

                            <!-- Dropdown Field -->
                            <div class="form-group mb-3">
                                <div class="dropdown">
                                    <button class="btn btn-secondary dropdown-toggle w-100" type="button"
                                            id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                                        Activation
                                    </button>
                                    <ul class="dropdown-menu w-100" aria-labelledby="dropdownMenuButton">
                                        <li><a class="dropdown-item" href="#" onclick="setActivation(true)">Activate Now</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="setActivation(false)">Activate Later</a></li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <button type="submit" class="btn btn-primary w-100 py-2">Submit</button>
                        </form>
                    </div>

                    <!-- Success Dialog -->
                    <div id="successMessage" class="alert alert-success mt-3" style="display:none;">
                        Data Entry Operator Created Successfully!
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container-fluid">
                <div class="row text-body-secondary">
                    <div class="col-6 text-start">
                        <a class="text-body-secondary" href="#"><strong>CodzSwod</strong></a>
                    </div>
                    <div class="col-6 text-end text-body-secondary d-none d-md-block">
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item"><a class="text-body-secondary" href="#">Contact</a></li>
                            <li class="list-inline-item"><a class="text-body-secondary" href="#">About Us</a></li>
                            <li class="list-inline-item"><a class="text-body-secondary" href="#">Terms & Conditions</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
    </div>
</div>

<!-- JavaScript -->
<!--<script>-->
<!--    let isActive = false; // Default value for activation status-->

<!--    // Function to set the activation status from the dropdown-->
<!--    function setActivation(status) {-->
<!--        isActive = status;-->
<!--    }-->

<!--    // Form submission handling-->
<!--    document.getElementById("deoRegistrationForm").addEventListener("submit", async function (event) {-->
<!--        event.preventDefault(); // Prevent default form submission-->

<!--        // Gather form data-->
<!--        const username = document.getElementById("username").value;-->
<!--        const email = document.getElementById("email").value;-->
<!--        const phone = document.getElementById("phone").value;-->
<!--        const ward = document.getElementById("ward").value;-->
<!--        const password = document.getElementById("password").value;-->

<!--        // Create the JSON body-->
<!--        const deoData = {-->
<!--            username: username,-->
<!--            password: password,-->
<!--            email: email,-->
<!--            phNumber: parseInt(phone),-->
<!--            wardNumber: parseInt(ward),-->
<!--            //admin: false, // Hardcoded as per requirement-->
<!--            active: isActive // Set based on dropdown selection-->
<!--        };-->

<!--        try {-->
<!--            // Make the POST request using fetch-->
<!--            const response = await fetch('http://localhost:8080/api/v1/admin/register', {-->
<!--                method: 'POST',-->
<!--                headers: {-->
<!--                    'Content-Type': 'application/json',-->
<!--                },-->
<!--                body: JSON.stringify(deoData),-->
<!--            });-->

<!--            if (response.ok) {-->
<!--                // Show success message-->
<!--                //document.getElementById("Registration Successful").style.display = "block";-->
<!--                 alert("Registration Successful");-->

<!--                // Clear the form-->
<!--                document.getElementById("deoRegistrationForm").reset();-->
<!--            } else {-->
<!--                console.error("Error creating DEO: ", response.statusText);-->
<!--            }-->
<!--        } catch (error) {-->
<!--            console.error("Error submitting form: ", error);-->
<!--        }-->
<!--    });-->
<!--</script>-->

<script>
    let isActive = false; // Default value for activation status

    // Function to set the activation status from the dropdown
    function setActivation(status) {
        isActive = status;
    }

    // Form validation and submission handling
    document.getElementById("deoRegistrationForm").addEventListener("submit", async function (event) {
        event.preventDefault(); // Prevent default form submission

        let isValid = true;

        // Username validation
        const username = document.getElementById("username").value.trim();
        const usernameField = document.getElementById("username");
        if (username === "") {
            usernameField.classList.add("is-invalid");
            isValid = false;
        } else {
            usernameField.classList.remove("is-invalid");
        }

        // Email validation
        const email = document.getElementById("email").value.trim();
        const emailField = document.getElementById("email");
        const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,6}$/;
        if (!emailPattern.test(email)) {
            emailField.classList.add("is-invalid");
            isValid = false;
        } else {
            emailField.classList.remove("is-invalid");
        }

        // Phone number validation (must be 10 digits)
        const phone = document.getElementById("phone").value.trim();
        const phoneField = document.getElementById("phone");
        if (!/^\d{10}$/.test(phone)) {
            phoneField.classList.add("is-invalid");
            isValid = false;
        } else {
            phoneField.classList.remove("is-invalid");
        }

        // Ward validation
        const ward = document.getElementById("ward").value.trim();
        const wardField = document.getElementById("ward");
        if (ward === "") {
            wardField.classList.add("is-invalid");
            isValid = false;
        } else {
            wardField.classList.remove("is-invalid");
        }

        // Password validation
        const password = document.getElementById("password").value.trim();
        const passwordField = document.getElementById("password");
        if (password === "") {
            passwordField.classList.add("is-invalid");
            isValid = false;
        } else {
            passwordField.classList.remove("is-invalid");
        }

        // If the form is valid, proceed with the API submission
        if (isValid) {
            const deoData = {
                username: username,
                password: password,
                email: email,
                phNumber: parseInt(phone),
                wardNumber: parseInt(ward),
                active: isActive // Set based on dropdown selection
            };

            try {
                // Make the POST request using fetch
                const response = await fetch('http://localhost:8080/api/v1/admin/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(deoData),
                });

                if (response.ok) {
                    // Show success message
                    alert("Registration Successful");

                    // Clear the form
                    document.getElementById("deoRegistrationForm").reset();
                } else {
                    console.error("Error creating DEO: ", response.statusText);
                }
            } catch (error) {
                console.error("Error submitting form: ", error);
            }
        } else {
            // Handle invalid form submission
            alert("Please fill out the form correctly.");
        }
    });

    // Optional: Add real-time validation feedback for each field (if needed)
    document.getElementById("username").addEventListener("input", function () {
        if (this.value.trim() !== "") {
            this.classList.remove("is-invalid");
        }
    });
    document.getElementById("email").addEventListener("input", function () {
        const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,6}$/;
        if (emailPattern.test(this.value.trim())) {
            this.classList.remove("is-invalid");
        }
    });
    document.getElementById("phone").addEventListener("input", function () {
        if (/^\d{10}$/.test(this.value.trim())) {
            this.classList.remove("is-invalid");
        }
    });
    document.getElementById("ward").addEventListener("input", function () {
        if (this.value.trim() !== "") {
            this.classList.remove("is-invalid");
        }
    });
    document.getElementById("password").addEventListener("input", function () {
        if (this.value.trim() !== "") {
            this.classList.remove("is-invalid");
        }
    });
</script>


<!-- Toggle Button Script -->

<script>
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('collapsed');
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
<script>
    const hamBurger = document.querySelector(".toggle-btn");

hamBurger.addEventListener("click", function () {
 document.querySelector("#sidebar").classList.toggle("expand");
});
</script>
</body>

</html>
